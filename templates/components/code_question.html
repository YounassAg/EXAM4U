{% load static %}

<div class="code-question-wrapper space-y-2">
    <!-- Language selector -->
    <select class="language-selector w-full sm:w-auto rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-2">
        <option value="python">Python</option>
        <option value="javascript">JavaScript</option>
        <option value="php">PHP</option>
        <option value="sql">MySQL/SQL</option>
    </select>
    
    <!-- Code editor -->
    <textarea name="question_{{ question_name }}" 
              class="code-editor hidden"
              required></textarea>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize code editor if not already initialized
        if (typeof window.codeEditorManager === 'undefined') {
            window.codeEditorManager = new CodeEditorManager();
        }
        
        // Initialize this specific editor
        const textarea = document.querySelector('[name="question_{{ question_name }}"]');
        if (textarea) {
            window.codeEditorManager.initializeEditor(textarea);
        }
    });
</script>
